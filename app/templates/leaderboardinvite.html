{% extends "user_base.html" %}
{% set active_page = "leaderboard" %}
{% from '_formhelpers.html' import render_field %}
{% block title %} EnvironMeet - Leaderboard {% endblock %}
{% block head %}
<link rel="stylesheet" href="../../static/styles/leaderboardinvite.css">
<link rel="stylesheet" href="../../static/styles/joinleaderboardinvite.css">
{% endblock %}

{% block content %}

<div class="content">
    <div class="LeaderboardButtons">
        <a href="/leaderboard/global">
            <button class="tablinks">Global</button>
        </a>
        <button class="tablinks" onclick="openTab(event, 'Invite')" id="defaultInviteOpen">Invite</button>
    </div>
    <div id="Invite" class="tabcontent">
        <div class="InviteButtons">
            <button class="invitelinks" onclick="openInvite(event, 'inviteleaderboards')" id="defaultJoinedOpen">Your Leaderboards</button>
            <button class="invitelinks" onclick="openInvite(event, 'joininvite')">Join Leaderboards</button>
            <button class="invitelinks" onclick="openInvite(event, 'createinvite')">Create A Leaderboard</button>

        </div>

        <div id="inviteleaderboards" class="invitecontent">
            <p>poo</p>
        </div>
        <div id="joininvite" class="invitecontent">
            <input type="text" placeholder="Search..">
            <br>
            {% for leaderboard in leaderboards %}
                <div class="modal fade" id="editModal_{{ object_id_to_hash(object_id=leaderboard.id, act='leaderboard') }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="closeModalBtn" data-bs-dismiss="modal">
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="desc">
                                    <textarea name="desc_{{ object_id_to_hash(object_id=leaderboard.id, act='leaderboard')}}" class="textInput newPostInput editPostInput" id="newPostInput" placeholder="What have you been up to?" required minlength="1" maxlength="500">{{ post.desc }}</textarea>
                                    <table class="invleaderboard">
                                        <tbody>
                                            {% for member in members %}
                                            {% if loop.index == 1 %}
                                            <tr class="leaderboardfirst">
                                                <td>{{ loop.index }}</td>
                                                <td class="membername">{{ member.username }}</td>
                                                <td>{{ member.points }} Points</td>
                                            </tr>
                                            {% elif loop.index == 2 %}
                                            <tr class="leaderboardsecond">
                                                <td>{{ loop.index }}</td>
                                                <td class="membername">{{ member.username }}</td>
                                                <td>{{ member.points }} Points</td>
                                            </tr>
                                            {% elif loop.index == 3 %}
                                            <tr class="leaderboardthird">
                                                <td>{{ loop.index }}</td>
                                                <td class="membername">{{ member.username }}</td>
                                                <td>{{ member.points }} Points</td>
                                            </tr>
                                            {% else %}
                                            <tr>
                                                <td>{{ loop.index }}</td>
                                                <td class="membername">{{ member.username }}</td>
                                                <td>{{ member.points }} Points</td>
                                            </tr>
                                            {% endif %}
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <span class="editAction">
                                <button type="button" data-bs-toggle="modal" data-bs-target="#editModal_{{ object_id_to_hash(object_id=leaderboard.id, act='post')}}" value="{{ object_id_to_hash(object_id=leaderboard.id, act='post') }}">{{ leaderboard.name }}</button>
            </span>

            {% endfor %}

        </div>
        <div id="createinvite" class="invitecontent">
            <form class="bg-white border border-grey rounded-5 me-5 p-3" method="POST" action="">
              <div class="form-group p-1">
                {{ render_field(form.name, class="form-control") }}
              </div>
              <div class="form-group p-1">
                {{ render_field(form.desc, class="form-control") }}
              </div>
                <div class="form-group p-1">
                  <label for="disabledinput">Username:</label>
                  <input class="form-control" type="text" id="disabledinput" placeholder="{{ user.username }}" readonly style="background-color: #f0ecec">
                </div>
              <input type="submit" value="Submit" class="btn btn-primary p-1" formaction="/leaderboard/invite"/>
            </form>
        </div>
    </div>
</div>

<script src="../static/scripts/leaderboardinvite.js"></script>

{% endblock %}