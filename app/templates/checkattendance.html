{% extends "user_base.html" %}
{% set active_page = "attendance" %}
{% block title %} EnvironMeet - Check Attendance Page (Orgs) {% endblock %}
{% block head %}
<link rel="stylesheet" href="../../static/styles/events.css">
{% endblock %}

{% block content %}


<div class="content2">
  <br>
  <div class="eventRow">
    <h1>My Events</h1>
    <a href="{{ url_for('add_events') }}" role="button" class="wgaming">Create Event</a>
  </div>
<!--  <input type="text" id="myInput" onkeyup="search()" placeholder="Search for names.." title="Type in a name" style="border-radius: 10px; padding:5px">-->
  <div>
    <table class="table table-striped" id="myTable">
      <thead>
        <tr>
          <th>Event</th>
          <th>Image</th>
          <th>Date</th>
          <th>Time</th>
            <th>Price</th>
          <th>Points</th>
            <th>Attendees</th>
          <th>Status</th>
          <th>Options</th>
        </tr>
      </thead>
      <tbody>
        <!-- <tr>
          <td colspan="7" style="text-align: center;">There are currently 0 entries.</td>
        </tr> -->
        {% for record in records %}
                {% if user.is_authenticated %}
                {% if record.organiser == user.user_id %}
        <tr>
          <td>{{ record.name }}</td>
            <td id="tsm"><img src="/{{ record.image }}"></td>
          <td>{{ record.date }}</td>
          <td>{{ record.time }}</td>
            <td>{{ record.price }}</td>
          <td>{{ record.points }}</td>
          <td>
<a href="{{ url_for('check_attendees', id=record.id) }}">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M12 2C9.243 2 7 4.243 7 7c0 2.757 2.243 5 5 5s5-2.243 5-5c0-2.757-2.243-5-5-5zm0 9c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3zm0 2c-3.866 0-7 1.716-7 4v1h14v-1c0-2.284-3.134-4-7-4z"/>
  </svg>
</a>
            </td>
          {% if record.is_closed == False %}
            <td>Open</td>
          {% else %}
          <td>Closed</td>
          {% endif %}
            {% if record.is_closed == False %}
          <td>
              <button>
              <a href="{{ url_for('updateevents', id=record.id) }}">
              <svg id="update" xmlns="http://www.w3.org/2000/svg" width="24" height="24.003" viewBox="0 0 24 24.003">
                <g id="ic_border_color_24px" transform="translate(0 0.003)">
                  <path id="Path_81" data-name="Path 81" d="M17.75,7,14,3.25l-10,10V17H7.75Zm2.96-2.96a1,1,0,0,0,0-1.41L18.37.29a1,1,0,0,0-1.41,0L15,2.25,18.75,6Z"/>
                </g>
              </svg>
            </a>
              </button>
            <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#modal-{{ record.id }}">
              <svg id="delete" xmlns="http://www.w3.org/2000/svg" width="18.669" height="24.003" viewBox="0 0 18.669 24.003">
                <path id="ic_delete_24px" d="M6.333,24.336A2.675,2.675,0,0,0,9,27H19.668a2.675,2.675,0,0,0,2.667-2.667v-16h-16Zm17.335-20H19L17.668,3H11L9.667,4.333H5V7H23.669Z" transform="translate(-5 -3)"/>
              </svg>
            </button>
              <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#modal-{{ record.id }}-closeevent">
                <svg height="64px" width="24px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 26 26" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g>
                    <path style="fill:#030104;" d="M21.125,0H4.875C2.182,0,0,2.182,0,4.875v16.25C0,23.818,2.182,26,4.875,26h16.25 C23.818,26,26,23.818,26,21.125V4.875C26,2.182,23.818,0,21.125,0z M18.78,17.394l-1.388,1.387c-0.254,0.255-0.67,0.255-0.924,0 L13,15.313L9.533,18.78c-0.255,0.255-0.67,0.255-0.925-0.002L7.22,17.394c-0.253-0.256-0.253-0.669,0-0.926l3.468-3.467 L7.221,9.534c-0.254-0.256-0.254-0.672,0-0.925l1.388-1.388c0.255-0.257,0.671-0.257,0.925,0L13,10.689l3.468-3.468 c0.255-0.257,0.671-0.257,0.924,0l1.388,1.386c0.254,0.255,0.254,0.671,0.001,0.927l-3.468,3.467l3.468,3.467 C19.033,16.725,19.033,17.138,18.78,17.394z"></path> </g> </g>
                </svg>
            </button>
          </td>
            {% endif %}
        </tr>
                {% endif %}
              {% endif %}
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
</div>

<!-- Modal -->
{% for recordz in records %}
<div class="modal fade" id="modal-{{ recordz.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Delete</h5>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete your event?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger"><a href="{{ url_for('deleteevent', id=recordz.id) }}" id="deletebtn" style="color: white !important;">Delete</a></button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="modal-{{ recordz.id }}-closeevent" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabelz">Close Event</h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you want to close this event?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a href="{{ url_for('closeevent', id=recordz.id) }}" class="btn btn-success" style="color: white !important;">Yes</a>
      </div>
    </div>
  </div>
</div>
{% endfor %}

{% endblock %}