{% extends "user_base.html" %}
{% set active_page = "feed" %}
{% block title %} EnvironMeet - Feed {% endblock %}
{% block head %}
<link rel="stylesheet" href="/static/styles/feed.css">
<script src="/static/scripts/likes.js"></script>
<script src="/static/scripts/comments.js"></script>
<script src="/static/scripts/share.js"></script>
{% endblock %}

{% block content %}

<div class="content">

    <a href="{{ url_for('feed') }}" class="back-btn">
        <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m9.474 5.209s-4.501 4.505-6.254 6.259c-.147.146-.22.338-.22.53s.073.384.22.53c1.752 1.754 6.252 6.257 6.252 6.257.145.145.336.217.527.217.191-.001.383-.074.53-.221.293-.293.294-.766.004-1.057l-4.976-4.976h14.692c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-14.692l4.978-4.979c.289-.289.287-.761-.006-1.054-.147-.147-.339-.221-.53-.221-.191-.001-.38.071-.525.215z" fill-rule="nonzero"/></svg>
        Back to Feed
    </a>

    <div class="postsContainer">
            <div class="postBox">
    
                <div class="top">
                    <div class="heading">
                        <div class="left">
                            <a href="/user/{{ get_user_from_id(post.author).username }}"><img class="avatar" src="/{{ get_user_from_id(post.author).profile_pic }}" alt="Avatar"></a>
                            <div class="info">
                                <span class="infoTop">
                                    <a class="posterName" href="/user/{{ get_user_from_id(post.author).username }}"> {{ get_user_from_id(post.author).username }}</a> is at <a href="#">East Coast Park Beach Cleanup</a>
                                </span>
                                <span class="timestamp">
                                    {{ post.timestamp|formatTimestamp }}
                                </span>
                            </div>
                        </div>
    
                        <!-- Some logic if post belong to account show actions menu -->
                        {% if user.is_authenticated %}
                        {% if user.id == post.author %}
                        <div class="actions-dropdown">
                            <button class="actions-menu">
                                <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 16.495c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75zm0-8.25c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75zm0-8.25c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75z"/></svg>
                            </button>
    
                            <!-- Edit Modal -->
                            <form method="POST" autocomplete="off" action="{{ url_for('editPost', hashedid=object_id_to_hash(object_id=post.id, act='post')) }}">
                                <div class="modal fade" id="editModal_{{ object_id_to_hash(object_id=post.id, act='post') }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="closeModalBtn" data-bs-dismiss="modal">
                                                    <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"/></svg>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="desc">
                                                    <textarea name="desc_{{ object_id_to_hash(object_id=post.id, act='post')}}" class="textInput newPostInput editPostInput" id="newPostInput" placeholder="What have you been up to?" required minlength="1" maxlength="500">{{ post.desc }}</textarea>
                                                </div>
                                                <div class="mediaFiles">
                                                    {% if post.image is not none %}
                                                    <img src="/{{ post.image }}">
                                                    {% endif %}
                                                </div>
                                            </div>
                                            <div class="modal-footer col-12 mt-5">
                                                <span class="charCounters">{{ 500 - post.desc|length }}</span>
                                                <button type="submit" class="postBtn editPostBtn" value="{{ object_id_to_hash(object_id=post.id, act='post')}}">Post</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
    
                            <!-- Delete Modal -->
                            <form method="POST" autocomplete="off" action="{{ url_for('deletePost', hashedid=object_id_to_hash(object_id=post.id, act='post')) }}">
                                <div class="modal fade deleteModal" id="deleteModal_{{ object_id_to_hash(object_id=post.id, act='post')}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                      <div class="modal-content">
                                        <div class="modal-body">
                                            <h2>Delete Post?</h2>
                                        </div>
                                        <div class="modal-footer">
                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                                          <button type="submit" class="btn btn-primary">Yes</button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </form>
    
                            <div class="dropdown-content">
                                <span class="editAction">
                                    <button type="button" data-bs-toggle="modal" data-bs-target="#editModal_{{ object_id_to_hash(object_id=post.id, act='post')}}" value="{{ object_id_to_hash(object_id=post.id, act='post') }}">Edit</button>
                                </span>
    
                                <span class="deleteAction">
                                    <button type="button" data-bs-toggle="modal" data-bs-target="#deleteModal_{{ object_id_to_hash(object_id=post.id, act='post')}}" value="{{ object_id_to_hash(object_id=post.id, act='post') }}">Delete</button>
                                </span>
                            </div>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>
                    <div class="desc">
                        <p>{{ post.desc }}</p>
                    </div>
                    <div class="mediaFiles">
                        {% if post.image is not none %}
                        <img src="/{{ post.image }}">
                        {% endif %}
                    </div>
                </div>
    
                <div class="divider"></div>
    
                <div class="mid">
                    <!-- Like and Share Button -->
                    <div class="like">
                        <svg class="{{ 'like-active' if user.id in post.likes | map(attribute='author') |list }}" onclick=`${likePost({{ object_id_to_hash(object_id=post.id, act='post') | tojson }})}` id="post{{ object_id_to_hash(object_id=post.id, act='post') }}LikesBtn" width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.67601 20.8623L17.3153 30.8568C17.6398 31.1616 17.802 31.314 18 31.314C18.198 31.314 18.3602 31.1616 18.6847 30.8568L29.324 20.8623C32.2582 18.1059 32.6146 13.5699 30.1467 10.3891L29.6827 9.79102C26.7304 5.98587 20.8044 6.62402 18.73 10.9705C18.437 11.5844 17.563 11.5844 17.27 10.9705C15.1956 6.62402 9.26958 5.98587 6.31732 9.79102L5.85328 10.3891C3.38542 13.5699 3.74174 18.1059 6.67601 20.8623Z"/>
                        </svg>
                        <span class="num" id="post{{ object_id_to_hash(object_id=post.id, act='post') }}LikesCount">{{ post.likes|length }}</span>
                    </div>
    
                    <!-- Share Modal -->
                    <div class="modal fade shareModal" id="sharePostModal_{{ object_id_to_hash(object_id=post.id, act='post') }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="closeModalBtn" data-bs-dismiss="modal">
                                        <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"/></svg>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="share-links">
                                        <div class="share-link">
                                            <input class="share-link-link" id="nativeLink_{{ object_id_to_hash(object_id=post.id, act='post') }}"/>
                                            <button class="clipboardBtn" onclick="navigator.clipboard.writeText(document.getElementById('nativeLink_{{ object_id_to_hash(object_id=post.id, act='post') }}').value)">
                                                <svg class="clipboard-svg" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 16h10v1h-10v-1zm0-1h10v-1h-10v1zm15-13v22h-20v-22h3c1.229 0 2.18-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1s1-.448 1-1-.448-1-1-1-1 .448-1 1zm9 1h-4l-2 2h-3.898l-2.102-2h-4v18h16v-18zm-13 9h10v-1h-10v1zm0-2h10v-1h-10v1z"/></svg>
                                            </button>
                                        </div>
                                        <div class="divider"></div>
                                        <h6>Share On</h6>
                                        <div class="share-icons">
                                            <a id="teleLink_{{ object_id_to_hash(object_id=post.id, act='post') }}" target="_blank" href="">
                                                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle style="fill:#59AAE7;" cx="256" cy="256" r="256"></circle> <path style="fill:#3D9AE3;" d="M256,0c-11.317,0-22.461,0.744-33.391,2.167C348.216,18.53,445.217,125.933,445.217,256 s-97.002,237.47-222.609,253.833C233.539,511.256,244.683,512,256,512c141.385,0,256-114.616,256-256S397.385,0,256,0z"></path> <path style="fill:#FCFCFC;" d="M164.689,311.141L82.127,269.86c-2.263-1.132-2.285-4.353-0.038-5.516L395.75,102.105 c2.304-1.192,4.964,0.811,4.456,3.355l-54.004,270.017c-0.385,1.927-2.446,3.011-4.253,2.237l-73.393-31.453 c-0.879-0.377-1.884-0.326-2.721,0.139l-94.839,52.688c-2.062,1.145-4.597-0.345-4.597-2.705v-82.474 C166.4,312.736,165.738,311.665,164.689,311.141z"></path> <path style="fill:#D8D7DA;" d="M200.31,338.967l-0.513-82.428c-0.003-0.528,0.27-1.018,0.72-1.293l133.899-81.798 c1.518-0.927,3.106,1.083,1.852,2.345l-101.9,102.624c-0.112,0.114-0.207,0.244-0.278,0.387l-17.43,34.858l-13.509,25.988 C202.426,341.045,200.32,340.538,200.31,338.967z"></path> </g></svg>
                                            </a> 
                                            <a id="waLink_{{ object_id_to_hash(object_id=post.id, act='post') }}" target="_blank" href="">
                                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <rect x="0" y="0" style="fill:#1BD741;" width="455.731" height="455.731"></rect> <g> <path style="fill:#FFFFFF;" d="M68.494,387.41l22.323-79.284c-14.355-24.387-21.913-52.134-21.913-80.638 c0-87.765,71.402-159.167,159.167-159.167s159.166,71.402,159.166,159.167c0,87.765-71.401,159.167-159.166,159.167 c-27.347,0-54.125-7-77.814-20.292L68.494,387.41z M154.437,337.406l4.872,2.975c20.654,12.609,44.432,19.274,68.762,19.274 c72.877,0,132.166-59.29,132.166-132.167S300.948,95.321,228.071,95.321S95.904,154.611,95.904,227.488 c0,25.393,7.217,50.052,20.869,71.311l3.281,5.109l-12.855,45.658L154.437,337.406z"></path> <path style="fill:#FFFFFF;" d="M183.359,153.407l-10.328-0.563c-3.244-0.177-6.426,0.907-8.878,3.037 c-5.007,4.348-13.013,12.754-15.472,23.708c-3.667,16.333,2,36.333,16.667,56.333c14.667,20,42,52,90.333,65.667 c15.575,4.404,27.827,1.435,37.28-4.612c7.487-4.789,12.648-12.476,14.508-21.166l1.649-7.702c0.524-2.448-0.719-4.932-2.993-5.98 l-34.905-16.089c-2.266-1.044-4.953-0.384-6.477,1.591l-13.703,17.764c-1.035,1.342-2.807,1.874-4.407,1.312 c-9.384-3.298-40.818-16.463-58.066-49.687c-0.748-1.441-0.562-3.19,0.499-4.419l13.096-15.15 c1.338-1.547,1.676-3.722,0.872-5.602l-15.046-35.201C187.187,154.774,185.392,153.518,183.359,153.407z"></path> </g> </g> </g></svg>
                                            </a>        
                                            <a id="twitterLink_{{ object_id_to_hash(object_id=post.id, act='post')}}" target="_blank" href="">
                                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.731 455.731" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <rect x="0" y="0" style="fill:#50ABF1;" width="455.731" height="455.731"></rect> <path style="fill:#FFFFFF;" d="M60.377,337.822c30.33,19.236,66.308,30.368,104.875,30.368c108.349,0,196.18-87.841,196.18-196.18 c0-2.705-0.057-5.39-0.161-8.067c3.919-3.084,28.157-22.511,34.098-35c0,0-19.683,8.18-38.947,10.107 c-0.038,0-0.085,0.009-0.123,0.009c0,0,0.038-0.019,0.104-0.066c1.775-1.186,26.591-18.079,29.951-38.207 c0,0-13.922,7.431-33.415,13.932c-3.227,1.072-6.605,2.126-10.088,3.103c-12.565-13.41-30.425-21.78-50.25-21.78 c-38.027,0-68.841,30.805-68.841,68.803c0,5.362,0.617,10.581,1.784,15.592c-5.314-0.218-86.237-4.755-141.289-71.423 c0,0-32.902,44.917,19.607,91.105c0,0-15.962-0.636-29.733-8.864c0,0-5.058,54.416,54.407,68.329c0,0-11.701,4.432-30.368,1.272 c0,0,10.439,43.968,63.271,48.077c0,0-41.777,37.74-101.081,28.885L60.377,337.822z"></path> </g> </g></svg>
                                            </a>   
                                            <a id="redditLink_{{ object_id_to_hash(object_id=post.id, act='post') }}" target="_blank" href="">
                                                <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16 2C8.27812 2 2 8.27812 2 16C2 23.7219 8.27812 30 16 30C23.7219 30 30 23.7219 30 16C30 8.27812 23.7219 2 16 2Z" fill="#FC471E"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M20.0193 8.90951C20.0066 8.98984 20 9.07226 20 9.15626C20 10.0043 20.6716 10.6918 21.5 10.6918C22.3284 10.6918 23 10.0043 23 9.15626C23 8.30819 22.3284 7.6207 21.5 7.6207C21.1309 7.6207 20.7929 7.7572 20.5315 7.98359L16.6362 7L15.2283 12.7651C13.3554 12.8913 11.671 13.4719 10.4003 14.3485C10.0395 13.9863 9.54524 13.7629 9 13.7629C7.89543 13.7629 7 14.6796 7 15.8103C7 16.5973 7.43366 17.2805 8.06967 17.6232C8.02372 17.8674 8 18.1166 8 18.3696C8 21.4792 11.5817 24 16 24C20.4183 24 24 21.4792 24 18.3696C24 18.1166 23.9763 17.8674 23.9303 17.6232C24.5663 17.2805 25 16.5973 25 15.8103C25 14.6796 24.1046 13.7629 23 13.7629C22.4548 13.7629 21.9605 13.9863 21.5997 14.3485C20.2153 13.3935 18.3399 12.7897 16.2647 12.7423L17.3638 8.24143L20.0193 8.90951ZM12.5 18.8815C13.3284 18.8815 14 18.194 14 17.3459C14 16.4978 13.3284 15.8103 12.5 15.8103C11.6716 15.8103 11 16.4978 11 17.3459C11 18.194 11.6716 18.8815 12.5 18.8815ZM19.5 18.8815C20.3284 18.8815 21 18.194 21 17.3459C21 16.4978 20.3284 15.8103 19.5 15.8103C18.6716 15.8103 18 16.4978 18 17.3459C18 18.194 18.6716 18.8815 19.5 18.8815ZM12.7773 20.503C12.5476 20.3462 12.2372 20.4097 12.084 20.6449C11.9308 20.8802 11.9929 21.198 12.2226 21.3548C13.3107 22.0973 14.6554 22.4686 16 22.4686C17.3446 22.4686 18.6893 22.0973 19.7773 21.3548C20.0071 21.198 20.0692 20.8802 19.916 20.6449C19.7628 20.4097 19.4524 20.3462 19.2226 20.503C18.3025 21.1309 17.1513 21.4449 16 21.4449C15.3173 21.4449 14.6345 21.3345 14 21.1137C13.5646 20.9621 13.1518 20.7585 12.7773 20.503Z" fill="white"></path> </g></svg>
                                            </a>   
                                            <a id="fbLink_{{ object_id_to_hash(object_id=post.id, act='post') }}" target="_blank" href="">
                                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 455.73 455.73" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path style="fill:#3A559F;" d="M0,0v455.73h242.704V279.691h-59.33v-71.864h59.33v-60.353c0-43.893,35.582-79.475,79.475-79.475 h62.025v64.622h-44.382c-13.947,0-25.254,11.307-25.254,25.254v49.953h68.521l-9.47,71.864h-59.051V455.73H455.73V0H0z"></path> </g></svg>
                                            </a>             
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="share">
                        <svg onclick=`${sharePost({{ object_id_to_hash(object_id=post.id, act='post') | tojson }})}` width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M28.2102 7.19088C27.7865 7.26626 27.2074 7.4579 26.3634 7.73925L14.5423 11.6796C12.1739 12.4691 10.4479 13.0456 9.30819 13.6C8.12651 14.1748 7.82455 14.6095 7.82455 15C7.82455 15.3904 8.12651 15.8251 9.30819 16.4C10.4479 16.9544 12.1739 17.5309 14.5423 18.3204L14.7607 18.3932C14.7976 18.4055 14.834 18.4176 14.8699 18.4295C15.6944 18.7039 16.2679 18.8947 16.6866 19.3134C17.1053 19.7321 17.2961 20.3056 17.5705 21.1301C17.5824 21.166 17.5945 21.2024 17.6068 21.2392L17.6796 21.4577C18.4691 23.8261 19.0456 25.5521 19.6 26.6918C20.1748 27.8735 20.6095 28.1754 21 28.1754C21.3904 28.1754 21.8252 27.8735 22.4 26.6918C22.9544 25.5521 23.5309 23.8261 24.3204 21.4577L28.2607 9.63662C28.5421 8.79258 28.7337 8.21351 28.8091 7.78977C28.8851 7.3624 28.8101 7.26532 28.7724 7.22758C28.7347 7.18985 28.6376 7.11486 28.2102 7.19088ZM28.0351 6.20634C28.5449 6.11566 29.0802 6.12119 29.4795 6.52048C29.8788 6.91976 29.8843 7.45513 29.7937 7.96491C29.7039 8.46967 29.4875 9.11881 29.2231 9.91196L29.2094 9.95284L25.2691 21.7739L25.2549 21.8164C24.4824 24.1339 23.886 25.9231 23.2993 27.1293C22.7293 28.3008 22.0511 29.1754 21 29.1754C19.9489 29.1754 19.2707 28.3008 18.7007 27.1293C18.114 25.9231 17.5176 24.1338 16.7451 21.8164L16.7309 21.7739L16.6581 21.5555C16.3319 20.5768 16.2103 20.2513 15.9795 20.0205C15.7487 19.7897 15.4232 19.6681 14.4445 19.3419L14.2261 19.2691L14.1836 19.2549C11.8661 18.4824 10.0769 17.886 8.87074 17.2992C7.6992 16.7293 6.82455 16.0511 6.82455 15C6.82455 13.9489 7.6992 13.2707 8.87074 12.7007C10.0769 12.114 11.8661 11.5176 14.1836 10.7451L14.2261 10.7309L26.0472 6.79057L26.088 6.77695C26.8812 6.51254 27.5303 6.29614 28.0351 6.20634Z"/>
                        </svg>  
                    </div>
    
                </div>
    
                <div class="divider"></div>
    
                <div class="bottom">
                    <!-- Comment Section -->
                    <div class="commentsContainer">
    
                        <!-- Comment Input -->
                        <div id="form-reload-{{ object_id_to_hash(object_id=post.id, act='post') }}">
                        {% if user.is_authenticated %}
                        <div class="postBox commentBox" id="commentForm-{{ object_id_to_hash(object_id=post.id, act='post') }}">
                            <div class="left">
                                <img src="/{{ get_user_from_id(post.author).profile_pic }}" alt="Avatar" class="avatar">
                                <textarea name="desc" class="textInput commentInput" id="commentInput-{{ object_id_to_hash(object_id=post.id, act='post') }}" placeholder="Write a comment..." rows="1"></textarea>
                            </div>
                            <button type="button" id="commentButton-{{ object_id_to_hash(object_id=post.id, act='post') }}" onclick=`${addComment({{ object_id_to_hash(object_id=post.id, act='post') | tojson }})}`>
                                <svg width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19.2041 12L19.5523 11.6412L19.9221 12L19.5523 12.3588L19.2041 12ZM6.83675 12.5C6.56061 12.5 6.33675 12.2761 6.33675 12C6.33675 11.7239 6.56061 11.5 6.83675 11.5V12.5ZM15.4298 7.64116L19.5523 11.6412L18.8559 12.3588L14.7335 8.35884L15.4298 7.64116ZM19.5523 12.3588L15.4298 16.3588L14.7335 15.6412L18.8559 11.6412L19.5523 12.3588ZM19.2041 12.5H6.83675V11.5H19.2041V12.5Z" fill="#222222"/>
                                </svg>
                            </button>
                        </div>
                        {% endif %}
    
                        <!-- Comments -->
                        <div class="commentsWrap" id="commentSection-{{ object_id_to_hash(object_id=post.id, act='post') }}">
                        {% if post.comments %}
                        {% for comment in post.comments %}
                        <div class="comments" id="commentText-{{ object_id_to_hash(object_id=comment.id, act='comment') }}">
                            <div class="left">
                                <img class="avatar" src="/{{ get_user_from_id(post.author).profile_pic }}" alt="Avatar">
                                <div class="info">
                                    
                                    <span class="infoTop">
                                        <span class="posterName"> {{ get_user_from_id(comment.author).username }} </span> 
                                    </span>
                                    <span class="timestamp">
                                        {{ comment.time|formatTimestamp }}
                                    </span>
    
                                    <div class="desc">
                                        <p id="commentDesc-{{ object_id_to_hash(object_id=comment.id, act='comment') }}">{{ comment.text }}</p>
                                    </div>
    
                                </div>
                            </div>
    
                            <!-- Like Comment -->
                            <!-- <div class="like">
                                <svg class="{{ 'like-active' if user.id in post.likes | map(attribute='author') |list }}" onclick="likeComment({{ comment.id }})" id="comment{{ comment.id }}LikesBtn" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4.45067 13.9082L11.4033 20.4395C11.6428 20.6644 11.7625 20.7769 11.9037 20.8046C11.9673 20.8171 12.0327 20.8171 12.0963 20.8046C12.2375 20.7769 12.3572 20.6644 12.5967 20.4395L19.5493 13.9082C21.5055 12.0706 21.743 9.0466 20.0978 6.92607L19.7885 6.52734C17.8203 3.99058 13.8696 4.41601 12.4867 7.31365C12.2913 7.72296 11.7087 7.72296 11.5133 7.31365C10.1304 4.41601 6.17972 3.99058 4.21154 6.52735L3.90219 6.92607C2.25695 9.0466 2.4945 12.0706 4.45067 13.9082Z"/>
                                </svg>
                                <span>52</span>
                            </div> -->
    
                            <!-- Some logic if comment belong to account show actions menu -->
                            {% if user.is_authenticated %}
                            {% if user.id == comment.author %}
                            <div class="actions-dropdown">
                                <button class="actions-menu">
                                    <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 16.495c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75zm0-8.25c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75zm0-8.25c1.242 0 2.25 1.008 2.25 2.25s-1.008 2.25-2.25 2.25-2.25-1.008-2.25-2.25 1.008-2.25 2.25-2.25zm0 1.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75z"/></svg>
                                </button>
    
                                <!-- Edit Modal -->
                                <div class="modal fade" id="editCommentModal_{{ object_id_to_hash(object_id=comment.id, act='comment') }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="closeModalBtn" data-bs-dismiss="modal">
                                                    <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"/></svg>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <textarea name="desc" class="textInput commentInput" id="editCommentInput-{{ object_id_to_hash(object_id=comment.id, act='comment') }}" placeholder="Write a comment..." rows="1">{{ comment.text }}</textarea>
                                            </div>
                                            <div class="modal-footer col-12 mt-5">
                                                <button type="button" class="postBtn" onclick=`${editComment({{ object_id_to_hash(object_id=comment.id, act='comment') | tojson }})}`>Post</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
    
                                <!-- Delete Modal -->
                                <div class="modal fade deleteModal" id="deleteCommentModal_{{ object_id_to_hash(object_id=comment.id, act='comment') }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <h2>Delete Comment?</h2>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                                                <button type="button" class="btn btn-primary" onclick=`${deleteComment({{ object_id_to_hash(object_id=comment.id, act='comment') | tojson }})}`>Yes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
    
                                <div class="dropdown-content">
                                    <span class="editAction">
                                        <button type="button" data-bs-toggle="modal" data-bs-target="#editCommentModal_{{ object_id_to_hash(object_id=comment.id, act='comment') }}">Edit</button>
                                    </span>
    
                                    <span class="deleteAction">
                                        <button type="button" data-bs-toggle="modal" data-bs-target="#deleteCommentModal_{{ object_id_to_hash(object_id=comment.id, act='comment') }}">Delete</button>
                                    </span>
                                </div>
                            </div>
                            {% endif %}
                            {% endif %}
    
                        </div>
                        {% endfor %}
                        </div>
    
                        {% if post.comments|length > 3 %}
                        <div class="showBtns">
                            <button class="moreComments" id="moreComments-{{ object_id_to_hash(object_id=post.id, act='post') }}" type="button" onclick=`${showMoreComments({{object_id_to_hash(object_id=post.id, act='post') | tojson }})}`>View More</button>
                            <button class="lessComments" id="lessComments-{{ object_id_to_hash(object_id=post.id, act='post') }}" type="button" onclick=`${showLessComments({{ object_id_to_hash(object_id=post.id, act='post') | tojson }})}`>View Less</button>
                            <input id="commentsShowing-{{ post.id }}" type="hidden" value="3">
                        </div>
                        {% endif %}
    
                        <script> updateItemsVisbility({{ object_id_to_hash(object_id=post.id, act='post') | tojson }}, 3) </script>
    
                        {% endif %}
                        </div>
    
                    </div>
                </div>
    
            </div>
            </div>
        </div>

</div>

<script src="/static/scripts/feed.js"></script>

{% endblock %}