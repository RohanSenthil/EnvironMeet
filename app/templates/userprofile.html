{% extends "user_base.html" %}
{% set active_page = "profile" %}
{% block title %} EnvironMeet - My Profile {% endblock %}
{% block head %}
<link rel="stylesheet" href="../../static/styles/accounts.css">
<link rel="stylesheet" href="../../static/styles/profile.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
{% endblock %}
{% block content %}
<div class="content">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class='flashes'>
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} " id='alert'>
    <span>{{ message }}</span>
    <button type="button" style='float:right;'class="btn-close" aria-label="Close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    {% if loggedout == False %}
        {% if member == True %}
        <div class="main">
            <h1>Dashboard</h1>
            <h2>{{ current_user.name }}</h2>
            {% if current_user.profile_pic %}
                <div class="profile_pic">
                    <img src="{{ current_user.profile_pic }}" alt="">
                </div>
            {% else %}
                <div class="profile_pic">
                    <img src="{{ url_for('static', filename='images/default_profile_pic.png')}}" alt="">
                </div>
            {% endif %}
            <div class="profile-stats">
				<ul>
					<li><span class="profile-stat-count">{{ posts }}</span> posts</li>
					<li><span class="profile-stat-count">{{ followers }}</span> followers</li>
					<li><span class="profile-stat-count">{{ following }}</span> following</li>
                </ul>
			</div>
        </div>
            <h3>Profile Pic: {{ profile_pic }}</h3>

        {% elif organisation == True %}
        <div class="main">
            <h1>Organisation Dashboard</h1>
            <h2>{{ current_user.name }}</h2>
            {% if current_user.profile_pic %}
                <div class="banner_pic">
                    <img src="{{ current_user.profile_pic }}" alt="" class="img-fluid">
                </div>
            {% else %}
                <div class="banner_pic">
                    <img src="{{ url_for('static', filename='images/default_profile_pic.png')}}" alt="">
                </div>
            {% endif %}
            <div class="profile-stats">
				<ul>
					<li><span class="profile-stat-count">{{ posts }}</span> posts</li>
					<li><span class="profile-stat-count">{{ followers }}</span> followers</li>
					<li><span class="profile-stat-count">{{ following }}</span> following</li>
                </ul>
			</div>
        </div>
            <div class="posts">
                <h3>Posts</h3>
                <!-- Display posts in format @rohan? -->
            </div>
            <div class="about">
                <h3>About</h3>
                <span>{{ current_user.description }}</span>
            </div>
            <div class="contact">
                <h3>Contact us</h3>
                <span>{{ current_user.contact }}</span>
                <h3>Find us</h3>
                <span>{{ current_user.address }}</span>
            </div>
        {% endif %}
    {% endif %}
    {% if loggedout == True %}
        <a href="/register">Create a new account?</a>
        <br>
        <a href="/login">Already have an account?</a>
    {% endif %}
</div>

{% endblock %}